- study = entity

- log :recurrent_genes
- recurrent_genes = study.get_genes :recurrent
- samples = study.samples

- log :matches
- iii study.knowledge_base
- matches = study.knowledge_base.subset('mutated_genes', "Gene" => recurrent_genes, "Sample" => samples)

- log :incidence
- matrix = AssociationItem.incidence matches
- matrix.fields = recurrent_genes.annotate(matrix.fields).name

- log :plot
= partial_render('ggplot2/incidence', :data => matrix, :incidence => "Mutated")

= table do
  - matrix
